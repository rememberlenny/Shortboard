<head>
  <script src="libs/jquery-2.1.0.min.js"></script>
  <script src="libs/mousetrap.js"></script>



    <div id="display-current-key"></div>
    <div class="DOM">
      <a href="#" id="select-target-button">SELECT TARGET</a>
    </div>

    <div class="keyboard_related">
      <a href="#" id="watch-button">WATCH</a>
      <a href="#" style="display:none;" id="stop-button">STOP</a>
      <a href="#" id="save-button">SAVE</a>
      <a href="#" style="display:none;"  id="clear-button">CLEAR</a>
      <a href="#" style="display:none;"  id="undo-button">REMOVE LAST</a>
    </div>

    <ul id="current-keys"></ul>

  </div>
  <script src="app.js"></script>
  <script>

    var keyCombos = [];
    var savedKeys = [];
    var keys      = {};
    var pastKey   = [];
    var tempKey = [];
    var keyComboDisplay = [];
    var isWatch   = false;
    var isSelectable = false;
    var $displayKey = $('#display-current-key');

    $(document).keydown(function (e) {
      keys[e.which] = true;
      printKeys();
    });

    $(document).keyup(function (e) {
      delete keys[e.which];
    });

    $('#select-target-button').on('click', function(event){
      selectTarget();
    });

    $('#watch-button').on('click', function(event){
      var self = this;
      beginWatchKeys();
    });

    $('#stop-button').on('click', function(event){
      var self = this;
      stopWatchKeys();
    });

    $('#clear-button').on('click', function(event){
      var self = this;
      clearKeyCombos(event, self);
    });

    $('#save-button').on('click', function(event){
      var self = this;
      saveKeyCombo(event, self);
    });

    $('*').hover(
      function(){
        if(isSelectable==true){
          $(this).css('border', '1px solid red');
        }
      },
      function(){
        if(isSelectable==true){
          $(this).css('border', 'none');
        }
      }
    );

    $('*').on('click', function(e){
      if(isSelectable==true){
        console.log(e.target);
        return false;
      }
    });


    function createBorder(e, self){
      console.log(self);
      if(e.type == 'mouseenter'){
        $(self).css('border', '1px solid red');
      } else {
        $(self).css('border', 'none');
      }
    }

    function scanForClick(){
      if(isSelectable == true){

      }
    }

    function selectTarget(){
      isSelectable = true;
      scanForClick();
    }

    function printKeys() {
      if(isWatch == true){
        tempKey = [];
        for (var i in keys) {
          if (!keys.hasOwnProperty(i)) continue;
          tempKey.push(i);
        }
        displayTempKey(tempKey);
      }
    }

    function displayTempKey(tempKey){
      $displayKey.html(tempKey);
      pastKey = tempKey;
      console.log(tempKey);
    }

    function beginWatchKeys(){
      isWatch = true;
      hideWatch();
    }

    function stopWatchKeys(){
      isWatch = false;
      showWatch();
    }

    function hideWatch(){
      $('#watch-button').css('display', 'none');
      $('#stop-button').css('display', 'inline-block');
    }

    function showWatch(){
      $('#watch-button').css('display', 'inline-block');
      $('#stop-button').css('display', 'none');
    }

    function showClear(){
      $('#clear-button').css('display', 'inline-block');
    }

    function hideClear(){
      $('#clear-button').css('display', 'none');
    }

    function saveKeyCombo(event, self){
      var comboKeys = tempKey.join(' ');
      if(comboKeys !== ''){
        keyCombos.push(comboKeys);
        displayKeyCombos();
        clearSavedKey();
        showClear();
      }
    }

    function displayKeyCombos(){
      keyComboDisplay = prepareKeyCombos();
      $('#current-keys').html(keyComboDisplay);
    }

    function prepareKeyCombos(){
      keyComboDisplay = [];
      for(i = 0; i < keyCombos.length; i++){
        keyComboDisplay.push('<li>' + keyCombos[i] + '</li>');
      }
      keyComboDisplay.join('');
      return keyComboDisplay;
    }

    function clearSavedKey(){
      savedKeys = [];
    }


    function clearKeyCombos(){
      hideClear();
      keyCombos = [];
      displayKeyCombos();
    }

  </script>
</body>
